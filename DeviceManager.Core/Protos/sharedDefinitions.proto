syntax = "proto3";

import "google/protobuf/wrappers.proto";
import "google/protobuf/timestamp.proto";

option csharp_namespace = "DeviceManager.Core.Proto";

message DeviceResource {
  int64 Id = 1;
  string Name = 2;
  google.protobuf.StringValue DisplayName = 3;
  bool Online = 4;
  google.protobuf.Timestamp LastSeen = 5;
  google.protobuf.Timestamp LastModified = 6;
  google.protobuf.Timestamp Created = 7;
  google.protobuf.StringValue LocationName = 8;
  string UserId = 9;

  LocationResource Location = 32;
  repeated SensorResource Sensors = 33;
}

message LocationResource {
  // Primary Key (Name, UserId)
  string Name = 1;
  string UserId = 2;

  // Properties
  google.protobuf.StringValue DisplayName = 3;
  google.protobuf.FloatValue Latitude = 4;
  google.protobuf.FloatValue Longitude = 5;
  google.protobuf.Timestamp LastModified = 6;
  google.protobuf.Timestamp Created = 7;

  repeated DeviceResource Devices = 32;
}

message SensorResource {
  int64 Id = 1;

  string Name = 2;
  google.protobuf.StringValue DisplayName = 3;
  string TypeName = 4;
  google.protobuf.Timestamp LastModified = 5;
  google.protobuf.Timestamp Created = 6;

  SensorTypeResource Type = 32;
}

message SaveSensorRequest {
  string Name = 1;
  int64 DeviceId = 2;
  google.protobuf.StringValue DisplayName = 3;
  string TypeName = 4;
  google.protobuf.Int64Value Id = 8;
}

message CreateDeviceSensorResource {
  string Name = 1;
  google.protobuf.StringValue DisplayName = 2;
  string TypeName = 3;
}

message SensorTypeResource {
  // Primary Key (Name)
  string Name = 1;

  string DataType = 2;
  string Unit = 3;
  string UnitShort = 4;
  google.protobuf.StringValue UnitSymbol = 5;
  bool IsDiscrete = 6;
  bool IsSummable = 7;
  google.protobuf.Timestamp LastModified = 10;
  google.protobuf.Timestamp Created = 11;
}